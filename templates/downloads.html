{% extends "base.html" %}
{% block javascript %}
  <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
  <script src="./js/main.js"></script>{% endblock %}
{% block content %}  <header class="banner">
    <h1>Download Mantid</h1>
  </header>
  <section id="latest" class="wrapper">
    <h1>Latest release ({{ latest_release['mantid_formatted_version'] }})</h1>
    <p id="release_notes">View changes made in <a href="{{ release_notes ~ latest_release['mantid_formatted_version'] }}">this release</a>.</p>
    <p class="instructions">Installation instructions:</p>
    <ul class="instructions">{% for instruction in instructions %}
      <li><a href="{{instruction.replace("-", "").lower() ~ '.html' }}">{{ instruction.replace("-", " ") }}</a></li>{% endfor %}
    </ul>
    <a href="#" class="button">Download Mantid for </a>
    <div class="windows-upgrade admonition alert-warning">
      <p>Known upgrade issues for Windows users:
	<ul>
	  <li>The install process has been streamlined but for a single time upgrading to v3.5.0 will require an additional single click to launch the uninstall of the old version. In future this will happen automatically.</li>
	  <li>Shortcuts attached to the taskbar start Mantid but Python is broken. The resolution is to delete the old shortcut and generate a new one by dragging the desktop icon to the taskbar.</li>
	</ul>
      </p>
    </div>
    <p>Alternative downloads:</p>
    <ul class="alternatives">{% for osname,downloadurls in latest_release['build_info']|dictsort() %}
      <li><a class="{{ osname }}" href="{{ downloadurls[0] }}">{{ downloadurls[0]|tidy_build_name(osname) }}</a></li>{% endfor %}
    </ul>
    <a href="./archives.html" id="previous">Previous releases</a>
  </section>
    <section id="gridcontainer">
      <article id="samples" class="column">
        <h2>Sample datasets</h2>
        <p>Sample datasets for use in Mantid:</p>
        <ul> {% for name,downloadurl in sample_datasets %}
          <li><a href="{{ downloadurl }}">{{ name }}</a></li>{% endfor %}
        </ul>
      </article>
      <article id="examples" class="column">
        <h2>Additional examples</h2>
        <p>Help documentation and examples can be found <a href="http://www.mantidproject.org/Documentation">here</a> </p>
        <p>The IPython notebook is not officially supported for use with Mantid, but an example notebook is provided below. </p>
        <ul> {% for name,downloadurl in ipython_notebook %}
            <li><a href="{{ downloadurl }}">{{ name }}</a></li>{% endfor %}
        </ul>
      </article>
      <article id="nightly" class="column">
        <h2>Nightly build &ndash; {{ nightly_release['date']}}</h2>
        <p><i>Nightly development build &ndash; minimally tested and <b>not</b> recommended for general use.</i></p>
	<div class="windows-upgrade admonition alert-warning">
	  <p>Current Windows nightly builds will require Windows update <a http://www.microsoft.com/en-us/download/details.aspx?id=49093>KB2999226</a> to have been applied.</p>
	  <p>If you see the following error:</p>
	  <img src="img/msvc2015-dll.png" width="300px">
	  <p>then please apply this update.</p>
	</div>

        <a href="#" class="button">Download Mantid for </a>
        <p>View changes in this build in the <a href="{{ mantid_news }}">recent news</a>.</p>
        <p>Alternative downloads:</p>
        <ul class="alternatives">{% for osname,downloadurl in nightly_release['build_info']|dictsort() %}
          <li><a class="{{ osname }}" href="{{ downloadurl }}">{{ downloadurl|tidy_build_name(osname, True) }}</a></li>{% endfor %}
        </ul>
        <p>Previous nightly builds can be found <a href="http://files.mantidproject.org/Development Releases">here</a>.</p>
      </article>
    </section>{% endblock %}
